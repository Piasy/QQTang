<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="zh">
<head>
<!-- Generated by javadoc (version 1.7.0_21) on Fri Dec 13 10:13:27 CST 2013 -->
<title>GameModel</title>
<meta name="date" content="2013-12-13">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="GameModel";
    }
//-->
</script>
<noscript>
<div>您的浏览器已禁用 JavaScript。</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="跳过导航链接"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../overview-summary.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../index-all.html">索引</a></li>
<li><a href="../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/example/client/model/Flag.html" title="com.example.client.model中的类"><span class="strong">上一个类</span></a></li>
<li><a href="../../../../com/example/client/model/HallModel.html" title="com.example.client.model中的类"><span class="strong">下一个类</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/example/client/model/GameModel.html" target="_top">框架</a></li>
<li><a href="GameModel.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li>嵌套&nbsp;|&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">方法</a></li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">方法</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.example.client.model</div>
<h2 title="类 GameModel" class="title">类 GameModel</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.example.client.model.GameModel</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">GameModel</span>
extends java.lang.Object</pre>
<div class="block"><p>This class is the model in the MVC design pattern, the game model.
 It takes charge of all communication with game server, upholding 
 the game status information, which include the player information, 
 map information, bomb information, prop information, etc,  
 and providing all those information to viewer for their drawing game
 view.</p>
 
 <p>Our basic assumption is that once the data has been sent
 to here, it must be json format. Because the TCP has error
 check mechanism. The user self is also a common user, 
 so I won't treat him specially.</p> 
 
 <p>We need to point out that the TCP transmission is very slow,
 the round travel time is approximately 150 mili-second, but players need
 to view 30 frames per second, so the game model will add 5 frames
 between the two frames receiving from game server, which send 
 two frames in every 200 mili-second. If the game model's calculation
 has error, the game model will apply the information receiving
 from game server in force, cause the 200 mili-second won't make
 the obvious error. This method is create by Yong Ren, the developer 
 of game server.
 </p>
  
 <p>author:     Piasy Xu</p>
 <p>date:               21:25 2013/12/11</p>
 <p>email:      xz4215@gmail.com</p>
 <p>github:     Piasy</p></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>构造器概要</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="构造器概要表, 列表构造器和解释">
<caption><span>构造器</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">构造器和说明</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../com/example/client/model/GameModel.html#GameModel(java.lang.String, int, java.lang.String, java.lang.String)">GameModel</a></strong>(java.lang.String&nbsp;gameIP,
         int&nbsp;gamePort,
         java.lang.String&nbsp;key,
         java.lang.String&nbsp;username)</code>
<div class="block">public constructor, set the server info, connection info, and controller handler</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>方法概要</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="方法概要表, 列表方法和解释">
<caption><span>方法</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">限定符和类型</th>
<th class="colLast" scope="col">方法和说明</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/example/client/model/GameModel.html#gameError()">gameError</a></strong>()</code>
<div class="block">Issue game error method.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected JSONObject</code></td>
<td class="colLast"><code><strong><a href="../../../../com/example/client/model/GameModel.html#getCurPos()">getCurPos</a></strong>()</code>
<div class="block">The method to get the player's position,
 we design it at the begin 
 period of develop, but at the end of our
 develop, this information won't make sense,
 game server won't use it any more.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../com/example/client/model/GameModel.html#getGameStatus()">getGameStatus</a></strong>()</code>
<div class="block">Only need to change users info, prop info according to
 the delta between curTime and rcvTime.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/example/client/model/GameModel.html#init()">init</a></strong>()</code>
<div class="block">Initialize socket, read, and writer; connect to game
 server, and prepare for game.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/example/client/model/GameModel.html#listen()">listen</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../com/example/client/model/GameModel.html#loadMap(int)">loadMap</a></strong>(int&nbsp;ID)</code>
<div class="block">The method to load the initial map
 information, we design it at the begin 
 period of develop, but at the end of our
 develop, this information won't make sense,
 viewer will get these information from
 server.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/example/client/model/GameModel.html#moveStatusChange(java.lang.String)">moveStatusChange</a></strong>(java.lang.String&nbsp;direction)</code>
<div class="block">Send move status change message to server
 The data transmitted are all in json
 format.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/example/client/model/GameModel.html#placeBomb()">placeBomb</a></strong>()</code>
<div class="block">Send place bomb message to server
 The data transmitted are all in json
 format.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/example/client/model/GameModel.html#prop(java.lang.String)">prop</a></strong>(java.lang.String&nbsp;cate)</code>
<div class="block">The method to send get prop information
 to game server.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/example/client/model/GameModel.html#propAvialable()">propAvialable</a></strong>()</code>
<div class="block">The method to calculate whether there is prop available
 to the player</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>从类继承的方法&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>构造器详细资料</h3>
<a name="GameModel(java.lang.String, int, java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>GameModel</h4>
<pre>public&nbsp;GameModel(java.lang.String&nbsp;gameIP,
         int&nbsp;gamePort,
         java.lang.String&nbsp;key,
         java.lang.String&nbsp;username)</pre>
<div class="block">public constructor, set the server info, connection info, and controller handler</div>
<dl><dt><span class="strong">参数:</span></dt><dd><code>server</code> - info, connection info, and controller handler</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>方法详细资料</h3>
<a name="loadMap(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadMap</h4>
<pre>protected&nbsp;java.lang.String&nbsp;loadMap(int&nbsp;ID)</pre>
<div class="block">The method to load the initial map
 information, we design it at the begin 
 period of develop, but at the end of our
 develop, this information won't make sense,
 viewer will get these information from
 server.</div>
<dl><dt><span class="strong">参数:</span></dt><dd><code>ID,</code> - the  map id</dd>
<dt><span class="strong">返回:</span></dt><dd>the json format string of map information</dd></dl>
</li>
</ul>
<a name="init()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>init</h4>
<pre>public&nbsp;int&nbsp;init()</pre>
<div class="block">Initialize socket, read, and writer; connect to game
 server, and prepare for game.
 Create socket ,BufferedReader, and
 PrintWriter before all works, to 
 avoid the scenario that these tools
 are used whiles they are not prepared.
 The data transmitted are all in json
 format. For more information, please see
 the wili page
 {Game Server And Users}</div>
<dl><dt><span class="strong">参数:</span></dt><dd><code>none</code> - </dd>
<dt><span class="strong">返回:</span></dt><dd>none</dd></dl>
</li>
</ul>
<a name="getGameStatus()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getGameStatus</h4>
<pre>public&nbsp;java.lang.String&nbsp;getGameStatus()</pre>
<div class="block">Only need to change users info, prop info according to
 the delta between curTime and rcvTime.
 map info and bomb info will be sent to viewer
 without change.
 The data transmitted are all in json
 format. For more information, please see
 the wili page
 {Game Server And Users}</div>
<dl><dt><span class="strong">返回:</span></dt><dd>json format string, game status</dd></dl>
</li>
</ul>
<a name="listen()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>listen</h4>
<pre>public&nbsp;void&nbsp;listen()</pre>
</li>
</ul>
<a name="moveStatusChange(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>moveStatusChange</h4>
<pre>public&nbsp;void&nbsp;moveStatusChange(java.lang.String&nbsp;direction)</pre>
<div class="block">Send move status change message to server
 The data transmitted are all in json
 format. For more information, please see
 the wili page
 {Game Server And Users}</div>
<dl><dt><span class="strong">参数:</span></dt><dd><code>direction</code> - </dd></dl>
</li>
</ul>
<a name="getCurPos()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurPos</h4>
<pre>protected&nbsp;JSONObject&nbsp;getCurPos()</pre>
<div class="block">The method to get the player's position,
 we design it at the begin 
 period of develop, but at the end of our
 develop, this information won't make sense,
 game server won't use it any more.
 server.</div>
<dl><dt><span class="strong">参数:</span></dt><dd><code>none</code> - </dd>
<dt><span class="strong">返回:</span></dt><dd>the position json object</dd></dl>
</li>
</ul>
<a name="placeBomb()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>placeBomb</h4>
<pre>public&nbsp;void&nbsp;placeBomb()</pre>
<div class="block">Send place bomb message to server
 The data transmitted are all in json
 format. For more information, please see
 the wili page
 {Game Server And Users}</div>
</li>
</ul>
<a name="propAvialable()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>propAvialable</h4>
<pre>protected&nbsp;int&nbsp;propAvialable()</pre>
<div class="block">The method to calculate whether there is prop available
 to the player</div>
<dl><dt><span class="strong">参数:</span></dt><dd><code>none</code> - </dd>
<dt><span class="strong">返回:</span></dt><dd>if has one, return the code, otherwise , -1 will be returned</dd></dl>
</li>
</ul>
<a name="prop(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prop</h4>
<pre>protected&nbsp;void&nbsp;prop(java.lang.String&nbsp;cate)</pre>
<div class="block">The method to send get prop information
 to game server.
 The data transmitted are all in json
 format. For more information, please see
 the wili page
 {Game Server And Users}</div>
<dl><dt><span class="strong">参数:</span></dt><dd><code>the</code> - category string of the prop</dd></dl>
</li>
</ul>
<a name="gameError()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>gameError</h4>
<pre>protected&nbsp;void&nbsp;gameError()</pre>
<div class="block">Issue game error method.
 This method will set the game status
 information's type as error, to let
 viewer know that it should exit the game,
 and notify controller, too.</div>
<dl><dt><span class="strong">参数:</span></dt><dd><code>none</code> - </dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="跳过导航链接"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../overview-summary.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../index-all.html">索引</a></li>
<li><a href="../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/example/client/model/Flag.html" title="com.example.client.model中的类"><span class="strong">上一个类</span></a></li>
<li><a href="../../../../com/example/client/model/HallModel.html" title="com.example.client.model中的类"><span class="strong">下一个类</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/example/client/model/GameModel.html" target="_top">框架</a></li>
<li><a href="GameModel.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li>嵌套&nbsp;|&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">方法</a></li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">方法</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
